!function(e){function n(){var e=document.createElement("canvas");e.id="heightMap",e.height=256,e.width=256,document.body.appendChild(e);for(var n=e.getContext("2d"),r=n.createImageData(1,1),i=r.data,t=0;256>t;t++)for(var a=0;256>a;a++){var o=0;o+=w.getHeightAt(t,a);var d=Math.floor(256*(1-o));i[0]=i[1]=i[2]=d,i[3]=255,n.putImageData(r,t,a)}}function r(){a=document.getElementById("container"),o=new e.PerspectiveCamera(27,window.innerWidth/window.innerHeight,1,8e3),o.position.z=2e3,o.position.y=300,o.position.x=500,d=new e.Scene,g=new e.WebGLRenderer,g.setSize(window.innerWidth,window.innerHeight),a.appendChild(g.domElement)}function i(){requestAnimationFrame(i),t()}function t(){.001*Date.now();g.render(d,o)}var a,o,d,g,s=new e.terraingen.MersenneTwisterProvider("barrie"),w=new e.terraingen.PerlinHeightMapProvider(s.random,4,.005);w.filters=[new e.terraingen.filters.Cliffs(.3,.2),new e.terraingen.filters.Cliffs(.7,.1),new e.terraingen.filters.HighPass(.6)];var c=new e.terraingen.BTTGeometryProvider;c.heightMapProvider=w;var h=new e.terraingen.MeshProvider;h.geometryProvider=c,r();var l=h.get();l.scale.x=l.scale.y=l.scale.z=4,l.scale.y=300,d.add(l),l.rotation.x=4,n(w),i()}(THREE);