var container,camera,scene,renderer,output,mesh,tile,controls,tileManager,chunk,K;!function(e){function n(){camera=new e.PerspectiveCamera(27,window.innerWidth/window.innerHeight,1,8e3),camera.position.z=500,camera.position.y=100,camera.lookAt(new e.Vector3(0,0,0)),scene=new e.Scene,renderer=new e.WebGLRenderer,renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement),controls=new e.OrbitControls(camera)}function r(){requestAnimationFrame(r),controls.update(),chunk.draw(camera,K),i()}function i(){.001*Date.now();renderer.render(scene,camera)}RNG=e.terraingen.MersenneTwisterProvider,Perlin=e.terraingen.generators.Perlin,Max=e.terraingen.modifiers.Max,Constant=e.terraingen.modifiers.Constant,Min=e.terraingen.modifiers.Min,Invert=e.terraingen.modifiers.Invert,Mix=e.terraingen.modifiers.Mix;var t=e.terraingen.modifiers.Abs,a=(e.terraingen.modifiers.ConvertToUnsigned,new Mix(new Invert(new t(new Perlin(new RNG(6543654).random,12,8e-4))),new Perlin(new RNG(3234).random,4,2e-4),new Perlin(new RNG(19029).random,4,4e-4)));output=new e.terraingen.modifiers.Cache(a);var o=new e.terraingen.PlaneGeometryProvider(output);n();var d=new e.terraingen.MeshProvider(o),w=new e.Vector2(0,0),s=new e.terraingen.AABB(w,512);chunk=new e.terraingen.Chunk(s,d,scene,1),K=window.innerWidth/(2*Math.tan(camera.fov/2)),console.log(K),scene.add(chunk.get()),window.toggleWireframe=function(){mesh.material.wireframe=!mesh.material.wireframe},window.toggleLOD=function(){for(var e=0;e<tileManager.tiles.length;e++)tileManager.tiles[e].doLOD=!tileManager.tiles[e].doLOD},r()}(THREE);