!function(e){function n(){var e=document.createElement("canvas");e.id="heightMap",e.height=256,e.width=256,document.body.appendChild(e);for(var n=e.getContext("2d"),r=n.createImageData(1,1),i=r.data,t=0;256>t;t++)for(var a=0;256>a;a++){var o=0;o+=s.getHeightAt(t,a);var d=Math.floor(256*(1-o));i[0]=i[1]=i[2]=d,i[3]=255,n.putImageData(r,t,a)}}function r(){a=document.getElementById("container"),o=new e.PerspectiveCamera(27,window.innerWidth/window.innerHeight,1,8e3),o.position.z=2e3,o.position.y=300,o.position.x=500,d=new e.Scene,w=new e.WebGLRenderer,w.setSize(window.innerWidth,window.innerHeight),a.appendChild(w.domElement)}function i(){requestAnimationFrame(i),t()}function t(){.001*Date.now();w.render(d,o)}var a,o,d,w,g=new e.terraingen.MersenneTwisterProvider("barrie"),s=new e.terraingen.PerlinHeightMapProvider(g.random,12,.005);s.filters=[new e.terraingen.filters.Cliffs(.3,.2),new e.terraingen.filters.Cliffs(.7,.1),new e.terraingen.filters.HighPass(.6)];var f=new e.terraingen.BTTGeometryProvider;f.heightMapProvider=s;var l=new e.terraingen.MeshProvider;l.geometryProvider=f,r();var m=l.get();m.scale.x=m.scale.y=m.scale.z=4,m.scale.y=300,d.add(m),m.rotation.x=4,n(s),window.toggleWireframe=function(){m.material.wireframe=!m.material.wireframe},i()}(THREE);